<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="网络层">
    <meta name="description" content="网络层主要是网关中信息传输，重点是 IP 数据报以及子网划分">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="baidu-site-verification" content="code-cYRQJC8I93" />  
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>网络层 | Jarrycow&#39;s Blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">
    <!--加载界面-->
    <link rel="stylesheet" type="text/css" href="/css/loading.css">
    
    <style>
        body{
            background-image: url(/medias/background.jpg);
            background-repeat:no-repeat;
            background-size: 100% 100%;
            background-attachment:fixed;
        }
    </style>



    <!-- bg-cover style     -->



<link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
<link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
<link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
<link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
<link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
<link rel="stylesheet" type="text/css" href="/css/matery.css">
<link rel="stylesheet" type="text/css" href="/css/my.css">
<link rel="stylesheet" type="text/css" href="/css/dark.css" media="none" onload="if(media!='all')media='all'">




    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
    <link rel="stylesheet" href="/css/post.css">




    
        <link rel="stylesheet" type="text/css" href="/css/reward.css">
    



    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
        </script>

<meta name="generator" content="Hexo 5.4.2"></head>



<body>
    
    <div id="loading-box">
      <!-- <div class="loading-left-bg"></div>
      <div class="loading-right-bg"></div> -->

      <!-- <div class="loading-line"></div> -->
      
      <!-- <div class="loading-bgline"><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/JavaWeb/hertaa_github.gif"></div> -->
      <!-- <div class="herta"><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/JavaWeb/hertaa_github.gif"></div> -->

    </div>
    <!-- 页面加载动画 -->
    <script>
      $(document).ready(function () {
        document.body.style.overflow = 'auto';
        document.getElementById('loading-box').classList.add("loaded")
      })
    </script>
  
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Jarrycow&#39;s Blog</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">

      
      <i class="fa fa-th-list" style="zoom: 0.6;"></i>
      
      <span>统计</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/tags">
          
          <i class="fas fa-tags" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>标签</span>
        </a>
      </li>
      
      <li>
        <a href="/categories">
          
          <i class="fas fa-bookmark" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>分类</span>
        </a>
      </li>
      
      <li>
        <a href="/archives">
          
          <i class="fas fa-archive" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>归档</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">

      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/about">
          
          <i class="fas fa-user-circle" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>关于我</span>
        </a>
      </li>
      
      <li>
        <a href="/about-website">
          
          <i class="fa fa-user-secret" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>关于网站</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/resources" class="waves-effect waves-light">

      
      <i class="fa fa-inbox" style="zoom: 0.6;"></i>
      
      <span>资源</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/resources/video">
          
          <i class="fa fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>视频</span>
        </a>
      </li>
      
      <li>
        <a href="/resources/music">
          
          <i class="fa fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>音乐</span>
        </a>
      </li>
      
      <li>
        <a href="/resources/picture">
          
          <i class="fa fa-image" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>图片</span>
        </a>
      </li>
      
      <li>
        <a href="/resources/file">
          
          <i class="fa fa-file" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>文件</span>
        </a>
      </li>
      
      <li>
        <a href="/bangumis">
          
          <i class="fa fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span></span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
  <li>
    <a href="javascript:;" class="waves-effect waves-light" onclick="switchNightMode()" title="深色/浅色模式" >
      <i id="sum-moon-icon" class="fas fa-sun" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Jarrycow&#39;s Blog</div>
        <div class="logo-desc">
            
            孔健睿的博客
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fa fa-th-list"></i>
			
			统计
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/tags " style="margin-left:75px">
				  
				   <i class="fa fas fa-tags" style="position: absolute;left:50px" ></i>
			      
		          <span>标签</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories " style="margin-left:75px">
				  
				   <i class="fa fas fa-bookmark" style="position: absolute;left:50px" ></i>
			      
		          <span>分类</span>
                  </a>
                </li>
              
                <li>

                  <a href="/archives " style="margin-left:75px">
				  
				   <i class="fa fas fa-archive" style="position: absolute;left:50px" ></i>
			      
		          <span>归档</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-user-circle"></i>
			
			关于
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/about " style="margin-left:75px">
				  
				   <i class="fa fas fa-user-circle" style="position: absolute;left:50px" ></i>
			      
		          <span>关于我</span>
                  </a>
                </li>
              
                <li>

                  <a href="/about-website " style="margin-left:75px">
				  
				   <i class="fa fa fa-user-secret" style="position: absolute;left:50px" ></i>
			      
		          <span>关于网站</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fa fa-inbox"></i>
			
			资源
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/resources/video " style="margin-left:75px">
				  
				   <i class="fa fa fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span>视频</span>
                  </a>
                </li>
              
                <li>

                  <a href="/resources/music " style="margin-left:75px">
				  
				   <i class="fa fa fa-music" style="position: absolute;left:50px" ></i>
			      
		          <span>音乐</span>
                  </a>
                </li>
              
                <li>

                  <a href="/resources/picture " style="margin-left:75px">
				  
				   <i class="fa fa fa-image" style="position: absolute;left:50px" ></i>
			      
		          <span>图片</span>
                  </a>
                </li>
              
                <li>

                  <a href="/resources/file " style="margin-left:75px">
				  
				   <i class="fa fa fa-file" style="position: absolute;left:50px" ></i>
			      
		          <span>文件</span>
                  </a>
                </li>
              
                <li>

                  <a href="/bangumis " style="margin-left:75px">
				  
				   <i class="fa fa fa-film" style="position: absolute;left:50px" ></i>
			      
		          <span></span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/netLayer.png')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">网络层</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
                                <span class="chip bg-color">计算机网络</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="post-category">
                                计算机网络
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2022-04-04
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2024-12-20
                </div>
                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="网络层功能"><a href="#网络层功能" class="headerlink" title="网络层功能"></a>网络层功能</h1><p><strong>网络层目的：</strong>在<strong>任意</strong>结点进行<strong>不可靠</strong>的<strong>数据报</strong>传输</p>
<h2 id="异构网络互联"><a href="#异构网络互联" class="headerlink" title="异构网络互联"></a>异构网络互联</h2><p><strong>网络异构：</strong><font color="blue">数据链路层</font>、<font color="blue">物理层</font>异构<sub>传输介质、数据编码、链路控制协议、数据单元格式、转发机制</sub></p>
<p>将多个计算机网络用通信设备相互连接<sub>局域网<strong>物理层</strong>、<strong>数据链路层</strong>、<strong>网络层</strong>可以不同，以上高层必须相同</sub></p>
<h3 id="中间设备"><a href="#中间设备" class="headerlink" title="中间设备"></a>中间设备</h3><ol>
<li>物理层：中继器、集线器</li>
<li>数据链路层：网桥、交换机</li>
<li>网络层：路由器</li>
<li>网络层以上：网关</li>
</ol>
<h2 id="数据报与虚电路"><a href="#数据报与虚电路" class="headerlink" title="数据报与虚电路"></a>数据报与虚电路</h2><p>网络层提供<strong>面向连接的服务(数据报)<strong>和</strong>无连接的服务(虚电路)</strong></p>
<h3 id="虚电路服务"><a href="#虚电路服务" class="headerlink" title="虚电路服务"></a>虚电路服务</h3><p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/%E8%99%9A%E7%94%B5%E8%B7%AF%E6%9C%8D%E5%8A%A1.png" alt="虚电路服务"></p>
<ul>
<li>必须先建立<strong>网络层连接</strong>——<strong>虚电路VC</strong>，双方沿着已建立的虚电路发送分组</li>
<li>虚电路只是<strong>逻辑上的连接</strong>,分组沿该逻辑连接传送，而非真正物理连接<sub>电路交换是先建立真正的连接</sub></li>
<li>目的主机地址仅在建立连接时使用，之后<strong>分组首部只携带虚电路编号</strong></li>
<li>使用<strong>可靠传输</strong>的协议<sub>不出错、不丢失、不重复、不失序、在规定时间内到达</sub></li>
</ul>
<h3 id="数据报服务"><a href="#数据报服务" class="headerlink" title="数据报服务"></a>数据报服务</h3><ul>
<li>不建立网络层连接，每个分组可走不同路径，分组首部必须携带完整地址</li>
<li>不提供<strong>端到端的可靠传输</strong><sub>分组可能出错、丢失、重复和失序</sub>，路由器简单，<strong>价格低廉</strong></li>
<li>将复杂的网络处理置于网络边缘<sub>运输层</sub>，而将简单的尽最大努力分组交付置于核心</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/%E6%95%B0%E6%8D%AE%E5%8C%85%E6%9C%8D%E5%8A%A1.png" alt="数据包服务"></p>
<h3 id="虚电路与数据报服务的对比"><a href="#虚电路与数据报服务的对比" class="headerlink" title="虚电路与数据报服务的对比"></a>虚电路与数据报服务的对比</h3><table>
<thead>
<tr>
<th align="left">对比的方面</th>
<th align="left">虚电路服务</th>
<th align="left">数据报服务</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>思路</strong></td>
<td align="left">可靠通信应当由网络来保证</td>
<td align="left">可靠通信应当由用户主机来保证</td>
</tr>
<tr>
<td align="left"><strong>连接的建立</strong></td>
<td align="left">必须有</td>
<td align="left">不需要</td>
</tr>
<tr>
<td align="left"><strong>终点地址</strong></td>
<td align="left">仅在连接建立阶段使用,每个分组使用短的虚电路号</td>
<td align="left">每个分组都有终点的完整地址</td>
</tr>
<tr>
<td align="left"><strong>分组的转发</strong></td>
<td align="left">属于同一条虚电路的分组均按照同一路由进行转发</td>
<td align="left">每个分组独立选择路由进行转发</td>
</tr>
<tr>
<td align="left"><strong>当结点出故障时</strong></td>
<td align="left">所有通过出故障的结点的虚电路均不能工作</td>
<td align="left">出故障的结点可能会丢失分组，一些路由可能会发生变化</td>
</tr>
<tr>
<td align="left"><strong>分组的顺序</strong></td>
<td align="left">总是按发送顺序到达终点</td>
<td align="left">到达终点时不一定按发送顺序</td>
</tr>
<tr>
<td align="left"><strong>端到端的差错处理和流量控制</strong></td>
<td align="left">可以由网络负责,也可以由用户主机负责</td>
<td align="left">由用户主机负责</td>
</tr>
</tbody></table>
<ol>
<li>从<strong>占用通信子网资源</strong>方面:虚电路服务将占用结点交换机的存储空间，而数据报服务对每个分组都有其完整的目标地址独立选径，如果传送大量短的分组，数据头部分远大于数据部分，则会浪费带宽;</li>
<li>从<strong>时间开销</strong>方面:虚电路服务有创建连接的时间开销，对传送小量的短分组，显得很浪费;而数据报服务决定分组的去向过程很复杂，对每个分组都有分析时间的开销;</li>
<li>从<strong>拥塞避免</strong>方面:虚电路服务因连接起来的资源可以预留下来，一旦分组到达，所需的带宽和结点交换机的容量便已具有，因此有一些避免拥塞的优势，而数据报服务则很困难;</li>
<li>从<strong>健壮性</strong>方面:通信线路的故障对虚电路服务是致命的因素，但对数据报服务则容易通过调整路由得到补偿，因此虚电路服务更脆弱。</li>
<li>虚电路服务适用于具有交互作用的信息，不仅及时、传输较为可靠，而且网络开销小;数据报服务适用于传输单个分组构成的、不具交互作用的信息以及对传输要求不高的场合</li>
</ol>
<h2 id="路由与转发"><a href="#路由与转发" class="headerlink" title="路由与转发"></a>路由与转发</h2><h3 id="路由器功能"><a href="#路由器功能" class="headerlink" title="路由器功能"></a>路由器功能</h3><ol>
<li><strong>路由选择</strong>：确定路径</li>
<li><strong>分组转发</strong>：分组到达时操作</li>
</ol>
<h2 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h2><p><strong>拥塞：</strong>随着<font color="blue">子网负载</font>增加，<font color="blue">吞吐量</font>降低</p>
<h3 id="拥塞控制方法"><a href="#拥塞控制方法" class="headerlink" title="拥塞控制方法"></a>拥塞控制方法</h3><ol>
<li><strong>开环控制：</strong>静态</li>
<li><strong>闭环控制：</strong>动态</li>
</ol>
<h1 id="网际协议IP"><a href="#网际协议IP" class="headerlink" title="网际协议IP"></a>网际协议IP</h1><p><strong>全球唯一</strong>表示某个主机或路由器接口的编码</p>
<h2 id="分类的IP地址"><a href="#分类的IP地址" class="headerlink" title="分类的IP地址"></a>分类的IP地址</h2><p>IP地址可以记为: ${&lt;网络号&gt;,&lt;主机号&gt;}$</p>
<p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/IP%E5%9C%B0%E5%9D%80%E7%BB%93%E6%9E%84.png" alt="IP 地址结构"></p>
<table>
<thead>
<tr>
<th align="center">网络类别</th>
<th align="center">最大可指派网络数</th>
<th align="center">首个可指派网络号</th>
<th align="center">最后可指派的网络号</th>
<th align="center">每个网络中的最大主机数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$A$</td>
<td align="center">$126(2^7-2)$</td>
<td align="center">1</td>
<td align="center">126</td>
<td align="center">16777214$(2^{24}-2)$</td>
</tr>
<tr>
<td align="center">$B$</td>
<td align="center">$16383(2^{14-1})$</td>
<td align="center">128.0</td>
<td align="center">191.255</td>
<td align="center">65534$(2^{16}-2)$</td>
</tr>
<tr>
<td align="center">$C$</td>
<td align="center">$2097151(2^{21}-1)$</td>
<td align="center">192.0.0</td>
<td align="center">223.255.255</td>
<td align="center">254$(2^8-2)$</td>
</tr>
</tbody></table>
<ul>
<li>全$0$的主机号代表网络地址</li>
<li>全$1$的主机号代表该网络所有主机</li>
</ul>
<p><img src="C:/Users/Jarrycow/Documents/图片/ABCDE.png" alt="IP 分类"></p>
<p><strong>特殊的IP地址</strong></p>
<table>
<thead>
<tr>
<th align="center">网络号</th>
<th align="center">主机号</th>
<th align="center">源地址使用</th>
<th align="center">目的地址使用</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">$0$</td>
<td align="center">$0$</td>
<td align="center">可以</td>
<td align="center">不可</td>
<td align="center">本网络的本主机</td>
</tr>
<tr>
<td align="center">$0$</td>
<td align="center">host-id</td>
<td align="center">可以</td>
<td align="center">不可</td>
<td align="center">本网络的某台主机</td>
</tr>
<tr>
<td align="center">全$1$</td>
<td align="center">全$1$</td>
<td align="center">不可</td>
<td align="center">可以</td>
<td align="center">本网络进行广播(受限广播地址)</td>
</tr>
<tr>
<td align="center">net-id</td>
<td align="center">全$1$</td>
<td align="center">不可</td>
<td align="center">可以</td>
<td align="center">对net-id上所有网络广播(直接广播地址)</td>
</tr>
<tr>
<td align="center">127.x.x.x</td>
<td align="center">非全$0$或全$1$的任何数</td>
<td align="center">可以</td>
<td align="center">可以</td>
<td align="center">本地软件回环测试</td>
</tr>
</tbody></table>
<p><strong>私有地址</strong></p>
<table>
<thead>
<tr>
<th>网络类型</th>
<th>私有IP地址</th>
</tr>
</thead>
<tbody><tr>
<td><strong>A</strong></td>
<td>10.0.0.0$\sim$10.255.255.255  (10.0.0.0&#x2F;8)</td>
</tr>
<tr>
<td><strong>B</strong></td>
<td>172.16.0.0$\sim$172.31.255.255    (172.16.0.0&#x2F;12)</td>
</tr>
<tr>
<td><strong>C</strong></td>
<td>192.168.0.0$\sim$192.168.255.255    (192.168.0.0&#x2F;16)</td>
</tr>
</tbody></table>
<h2 id="划分子网"><a href="#划分子网" class="headerlink" title="划分子网"></a>划分子网</h2><p><code>IP地址::=&#123;&lt;网络号&gt;,&lt;子网号&gt;,&lt;主机号&gt;&#125;</code></p>
<p><strong>好处：</strong>减少广播域大小、提高IP地址利用率<sub>不增加网络数量、主机数减少</sub></p>
<h3 id="子网掩码"><a href="#子网掩码" class="headerlink" title="子网掩码"></a>子网掩码</h3><ul>
<li>从一个IP数据报的首部并无法判断源主机或目的主机所连接的网络是否进行了子网划分。</li>
<li>使用子网掩码(subnet mask)可以找出IP地址中的子网部分。规则:<ul>
<li>子网掩码长度&#x3D;32位</li>
<li>子网掩码左边部分的一连串1，对应于网络号和子网号</li>
<li>子网掩码右边部分的一连串0，对应于主机号</li>
</ul>
</li>
<li>$网络地址\ &#x3D;\ IP地址\ \ &amp;\ \ 子网掩码$</li>
<li><strong>默认子网掩码</strong><ul>
<li><strong>A</strong>:$255.0.0.0$</li>
<li><strong>B</strong>:$255.255.0.0$</li>
<li><strong>C</strong>:$255.255.255.0$</li>
</ul>
</li>
</ul>
<h3 id="使用子网时分组的转发"><a href="#使用子网时分组的转发" class="headerlink" title="使用子网时分组的转发"></a>使用子网时分组的转发</h3><p><strong>划分子网时路由器转发分组算法</strong></p>
<ol>
<li>从收到的分组的首部提取目的IP地址$D$</li>
<li>先用各网络的<strong>子网掩码和$D$逐位相与</strong>，看是否和相应的网络地址匹配。若匹配，则将分组<strong>直接交付</strong>；否则就是<strong>间接交付</strong>，执行(3)</li>
<li>若路由表中有目的地址为$D$的<strong>特定主机路由</strong>，则将分组传送给指明的下一跳路由器;否则，执行(4)</li>
<li>对路由表中的每一行，将<strong>子网掩码和$D$逐位相与</strong>。若结果与该行的目的网络地址匹配，则将分组传送给该行指明的下一跳路由器；否则，执行(5)</li>
<li>若路由表中有一个<strong>默认路由</strong>，则将分组传送给路由表中所指明的默认路由器;否则，执行(6)</li>
<li>报告转发分组出错。</li>
</ol>
<h2 id="无分类编址CIDR-构造超网"><a href="#无分类编址CIDR-构造超网" class="headerlink" title="无分类编址CIDR(构造超网)"></a>无分类编址CIDR(构造超网)</h2><h3 id="无分类编址-CIDR"><a href="#无分类编址-CIDR" class="headerlink" title="无分类编址 CIDR"></a>无分类编址 CIDR</h3><h4 id="CIDR最主要特点"><a href="#CIDR最主要特点" class="headerlink" title="CIDR最主要特点"></a>CIDR最主要特点</h4><ul>
<li>CIDR消除了传统的A类、B类和C类地址以及划分子网的概念，因而可以更加有效地分配IPv4的地址空间。</li>
<li>CIDR使用各种长度的“<strong>网络前缀</strong>”(network-prefix)来代替分类地址中的网络号和子网号。</li>
<li><strong>IP地址从三级编址(使用子网掩码）又回到了两级编址</strong>。</li>
</ul>
<p><strong>作用：</strong>小的网络汇聚成小的超网</p>
<h4 id="无分类的两级地址"><a href="#无分类的两级地址" class="headerlink" title="无分类的两级地址"></a>无分类的两级地址</h4><p>$IP地址::&#x3D;{&lt;网络前缀&gt;,&lt;主机号&gt;}$</p>
<ul>
<li><strong>斜线记法</strong>：$IP地址&#x2F;网络前缀所占位数$</li>
</ul>
<h4 id="路由聚合"><a href="#路由聚合" class="headerlink" title="路由聚合"></a>路由聚合</h4><ul>
<li>CIDR 把网络前缀都相同的连续的IP地址组成“<strong>CIDR地址块</strong>”。</li>
<li>一个CIDR地址块可以表示很多地址，这种地址的聚合常称为路由聚合,它使得路由表中的一个项目可以表示很多个（例如上千个)原来传统分类地址的路由。</li>
<li>路由聚合有利于<strong>减少</strong>路由器之间的路由选择信息的交换，从而提高了整个互联网的性能。</li>
<li>路由聚合也称为<strong>构成超网</strong>(supernetting)</li>
<li>CIDR虽然不使用子网了，但仍然使用“<strong>掩码</strong>”这一名词(但不叫子网掩码)。</li>
</ul>
<h4 id="最长前缀匹配"><a href="#最长前缀匹配" class="headerlink" title="最长前缀匹配"></a>最长前缀匹配</h4><ul>
<li>使用CIDR时，路由表中的每个项目由“网络前缀”和“下一跳地址”组成。<strong>在查找路由表时可能会得到不止一个匹配结果。</strong></li>
<li>应当从匹配结果中选择具有最长网络前缀的路由：<strong>最长前缀匹配</strong>(longest-prefix matching).</li>
<li>网络前缀越长，其地址块就越小，因而路由就越具体(morespecific)。</li>
<li>最长前缀匹配又称为<strong>最长匹配</strong>或<strong>最佳匹配</strong>。</li>
</ul>
<h2 id="IPv4地址应用规划"><a href="#IPv4地址应用规划" class="headerlink" title="IPv4地址应用规划"></a>IPv4地址应用规划</h2><p>子网IP需求$&#x3D;$主机数$+$路由器接口数$+$网络地址$+$广播地址1</p>
<ul>
<li><p><strong>定长子网掩码FLSM</strong></p>
<p>从主机号借$n$比特作为子网号</p>
<p>子网数量：$2^n$</p>
<p>每个子网地址数：$2^{主机号-n}$</p>
<p>缺点：易造成IP地址浪费</p>
</li>
<li><p><strong>变长子网掩码VLSM</strong></p>
<p>主机号位数：$[\log_2(子网IP需求)]$</p>
<p>网络前缀位数：$32-主机号位数$</p>
<p>每个子块起点位置不能随意选取，只能选取大小整数倍的地址作为起点<sub>建议先给大的子块分配</sub></p>
</li>
</ul>
<p>网段网络号：$A.B.C.D&#x2F;n$，可分配主机号：$32-n$，1位主机只可以表示广播和网络，故至少2位主机号，故最少分成$2^{30-n}$个子网；子网最大则只有全部分给主机，最多$2^{32-n}$台主机</p>
<h1 id="路由选择协议"><a href="#路由选择协议" class="headerlink" title="路由选择协议"></a>路由选择协议</h1><p>路由器转发分组由<strong>路由表</strong>转发，路由表通过路由算法得到</p>
<ul>
<li><strong>静态</strong>路由选择(非自适应路由选择)：<strong>简单</strong>、<strong>开销较小</strong>，但<strong>不能及时适应网络状态的变化</strong><sub>管理员手动配置路由</sub></li>
<li><strong>动态</strong>路由选择(自适应路由选择)    ：能较好地适应<strong>网络状态的变化</strong>，但实现起来较为复杂，开销也比较大。</li>
</ul>
<h3 id="路由选择协议-1"><a href="#路由选择协议-1" class="headerlink" title="路由选择协议"></a>路由选择协议</h3><ul>
<li><p><strong>内部网关协议IGP</strong>(Interior Gateway Protocol)</p>
<ol>
<li>在一个自治系统<strong>内部使用</strong>的路由选择协议。</li>
<li>目前这类路由选择协议使用得最多，如<strong>RIP</strong>和<strong>OSPF</strong>协议。</li>
</ol>
<ul>
<li>路由信息协议RIP(基于距离向量，最早使用)</li>
<li>内部网关路由协议IGPR(基于距离向量，被EIGRP取代)</li>
<li>增强型内部网关路由协议EIGRP(结合距离向量和链路状态)</li>
<li>开放式最短路径优先OSPF(基于链路状态，各个网络中广泛使用)</li>
<li>中间系统到中间系统IS-IS(基于链路状态，ISP骨干网最常用IGP协议)</li>
</ul>
</li>
<li><p><strong>外部网关协议EGP</strong>(External Gateway Protocol)</p>
<ol>
<li>若源站和目的站处在不同的自治系统中，当数据报传到一个自治系统的边界时，就需要使用一种协议<strong>将路由选择信息传递到另一个自治系统</strong>中。这样的协议就是外部网关协议 EGP。</li>
<li>在外部网关协议中目前使用最多的是<strong>BGP</strong>。</li>
</ol>
</li>
</ul>
<p><strong>协议封装</strong></p>
<p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E5%B0%81%E8%A3%85.png" alt="路由协议封装"></p>
<h3 id="路由选择协议特点"><a href="#路由选择协议特点" class="headerlink" title="路由选择协议特点"></a>路由选择协议特点</h3><ul>
<li><strong>自适应：</strong>较好适应网络状态变化</li>
<li><strong>分布式：</strong>路由器之间交换路由信息</li>
<li><strong>分层次</strong>：将整个因特网划分许多较小的自治系统AS</li>
</ul>
<h3 id="自治系统AS"><a href="#自治系统AS" class="headerlink" title="自治系统AS"></a>自治系统AS</h3><ul>
<li><strong>自治系统AS：</strong>在单一的技术管理下的一组路由器，而这些路由器使用一种AS内部的路由选择协议和共同的度量以确定分组在该AS内的路由，同时还使用一种AS之间的路由选择协议用以确定分组在AS之间的路由。</li>
<li>尽管一个AS使用了多种内部路由选择协议和度量，但重要的是<strong>一个AS对其他AS表现出的是一个单一的和一致的路由选择策略</strong>。</li>
</ul>
<h2 id="路由信息协议RIP"><a href="#路由信息协议RIP" class="headerlink" title="路由信息协议RIP"></a>路由信息协议RIP</h2><p>走最短路由</p>
<h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><ul>
<li>内部网关协议IGP中最先得到广泛使用的协议。</li>
<li>是一种<strong>分布式的、基于距离向量</strong>的路由选择协议。</li>
<li>要求网络中的每一个路由器都要维护从它自己到其他每一个目的网络的距离记录。</li>
</ul>
<p><strong>“距离”的定义</strong></p>
<ul>
<li><p>从一个路由器到<strong>直接连接</strong>的网络的距离定义为1.</p>
</li>
<li><p>RIP协议中的“距离”也称为“<strong>跳数</strong>”(hop count)，因为每经过一个路由器，跳数就加1。</p>
</li>
<li><p>RIP允许一条路径<strong>最多只能包含15个路由器</strong>。</p>
<p><strong>“距离”的最大值为16时即相当于不可达</strong>。可见RIP只适用于小型互联网。</p>
</li>
<li><p><strong>RIP不能在两个网络之间同时使用多条路由</strong>。RIP选择最短路由，哪怕存在低时延但路由器较多的路由。</p>
</li>
</ul>
<h3 id="RIP协议特点"><a href="#RIP协议特点" class="headerlink" title="RIP协议特点"></a>RIP协议特点</h3><ol>
<li>仅和<strong>相邻路由器</strong>交换信息。</li>
<li>交换的信息是<strong>自己的路由表</strong>。</li>
<li>按<strong>固定的时间间隔</strong>交换路由信息。</li>
</ol>
<h3 id="距离向量算法"><a href="#距离向量算法" class="headerlink" title="距离向量算法"></a>距离向量算法</h3><p>路由器收到相邻路由器(其地址为X)的一个RIP 报文:</p>
<ol>
<li><p>先修改此RIP报文中的所有项目:把“下一跳”字段中的地址都改为X，并把所有的“距离”字段的值加1.</p>
</li>
<li><p>对修改后的 RIP 报文中的每一个项目，重复以下步骤:</p>
</li>
</ol>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span>  项目中的目的网络不在路由表中
	把该项目加到路由表中
<span class="token keyword">else</span>
	<span class="token keyword">if</span>  下一跳字段给出的路由器地址是同样的
		把收到的项目替换原路由表中的项目。
	<span class="token keyword">else</span>
   		<span class="token keyword">if</span>  收到项目中的距离小于路由表中的距离
   			进行更新
   		<span class="token keyword">else</span>
	    	什么也不做。<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>到达目的网络，相同下一跳，最新消息，更新距离</li>
<li>到达目的网络，不同下一跳，新路由优势，更新距离与下一跳</li>
<li>到达目的网络，不同下一跳，等价负载均衡，添加</li>
<li>发现新网络，添加</li>
<li>到达目的网络，不同下一跳，新路由劣势，不更新</li>
</ul>
<ol>
<li>若3分钟还没有收到相邻路由器的更新路由表，则把此相邻路由器记为不可达路由器，即将距离置为16(表示不可达)。</li>
<li>返回。</li>
</ol>
<h3 id="RIP2协议报文格式"><a href="#RIP2协议报文格式" class="headerlink" title="RIP2协议报文格式"></a>RIP2协议报文格式</h3><p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/RIP2%E5%8D%8F%E8%AE%AE%E6%A0%BC%E5%BC%8F.png" alt="RIP2 协议报文格式"></p>
<ul>
<li>RIP2报文由<strong>首部</strong>和<strong>路由</strong>部分组成。</li>
<li>RIP2报文中的路由部分由若干个路由信息组成。每个路由信息需要用20个字节。地址族标识符(又称为<strong>地址类别</strong>)字段用来标志所使用的地址协议。</li>
<li>路由标记填入自治系统的号码，这是考虑使RIP有可能收到本自治系统以外的路由选择信息。</li>
<li>再后面指出某个网络地址、该网络的子网掩码、下一跳路由器地址以及到此网络的距离。</li>
<li>一个RIP报文最多可包括25个路由，因而RIP报文的最大长度是4+20 x25&#x3D;504字节。如超过，必须再用一个RIP报文来传送。</li>
<li><strong>RIP2具有简单的鉴别功能</strong>。<ol>
<li>若使用鉴别功能，则将原来写入第一个路由信息(<strong>20个字节</strong>)的位置用作鉴别。</li>
<li>在鉴别数据之后才写入路由信息，但这时最多只能再放入24个路由信息。</li>
</ol>
</li>
<li><strong>RIP协议特点</strong>：好消息传播得快，坏消息传播得慢。</li>
<li><strong>RIP存在的一个问题</strong>：当网络出现故障时，要经过比较长的时间(例如数分钟)路由环路才能将此信息传送到所有的路由器。<sub>距离向量算法故有问题</sub><ul>
<li>解决：限制最大路径距离15(16表示不可达)</li>
<li>当路由表发生变化就立即更新报文，而非周期性发送</li>
<li>让路由器记录收到某特定路由信息接口，而不让同一路由信息在通过此接口向反方向传送(<strong>水平分割</strong>)</li>
</ul>
</li>
</ul>
<h2 id="开放最短路径优先OSPF"><a href="#开放最短路径优先OSPF" class="headerlink" title="开放最短路径优先OSPF"></a>开放最短路径优先OSPF</h2><h3 id="OSPF协议的基本特点"><a href="#OSPF协议的基本特点" class="headerlink" title="OSPF协议的基本特点"></a>OSPF协议的基本特点</h3><ul>
<li>“<strong>开放</strong>”表明OSPF 协议不是受某一家厂商控制，而是公开发表的。</li>
<li>“<strong>最短路径优先</strong>”是因为使用了Dijkstra提出的最短路径算法SPF</li>
<li>采用<strong>分布式的链路状态协议</strong></li>
<li><strong>注意</strong>：OSPF 只是一个协议的名字，它并不表示其他的路由选择协议不是“最短路径优先”。</li>
</ul>
<h3 id="OSPF要点"><a href="#OSPF要点" class="headerlink" title="OSPF要点"></a>OSPF要点</h3><ul>
<li><strong>向本自治系统中所有路由器发送信息</strong>，这里使用的方法是<strong>洪泛法</strong>。</li>
<li>发送的信息就是与本路由器<strong>相邻</strong>的所有路由器的链路状态<sub>可达性、度量</sub>，但这只是路由器所知道的<strong>部分信息</strong>。<ul>
<li>**“链路状态”就是说明本路由器都和哪些路由器相邻，以及该链路的“度量”(metric)**。</li>
</ul>
</li>
<li>只有当链路状态<strong>发生变化</strong>时，路由器才用洪泛法向所有路由器发送此信息。</li>
</ul>
<h3 id="链路状态数据库-link-state-database"><a href="#链路状态数据库-link-state-database" class="headerlink" title="链路状态数据库(link-state database)"></a>链路状态数据库(link-state database)</h3><ul>
<li>由于各路由器之间频繁地交换链路状态信息，因此所有的路由器最终都能建立一个链路状态数据库。</li>
<li>这个数据库实际上就是<strong>全网的拓扑结构图</strong>，<strong>它在全网范围内是一致的</strong>(这称为链路状态数据库的<strong>同步</strong>)。</li>
<li>OSPF 的链路状态数据库能<strong>较快地进行更新</strong>，使各个路由器能及时更新其路由表。</li>
<li><strong>OSPF 的更新过程收敛得快是其重要优点</strong>。</li>
</ul>
<h3 id="OSPF的区域"><a href="#OSPF的区域" class="headerlink" title="OSPF的区域"></a>OSPF的区域</h3><ul>
<li>为了使OSPF 能够用于规模很大的网络，OSPF 将一个自治系统再划分为若干个更小的范围，叫做<strong>区域</strong>。</li>
<li>每一个区域都有一个<strong>32位</strong>的区域标识符(用点分十进制表示)，主干区域必须0.0.0.0</li>
<li>区域也不能太大，在一个区域内的路由器最好不超过200个。</li>
<li><strong>优点：</strong>洪范法广播范围局限于一个区域而非整个AS，减少网络通信量</li>
</ul>
<p><strong>划分区域</strong></p>
<ul>
<li>主干区域的作用是用来连通其他在下层的区域</li>
<li><strong>区域内路由器IR：</strong>区域内不与其他区域接通路由器</li>
<li>其他区域来的信息都由<strong>区域边界路由器ABR</strong>(area border router)进行概括</li>
<li>主干区域内的路由器叫做<strong>主干路由器BBR</strong>(backbone router)</li>
<li>和本自治系统外的其他自治系统交换路由信息。这样的路由器叫做<strong>自治系统边界路由器ASBR</strong></li>
</ul>
<h3 id="OSRF分组"><a href="#OSRF分组" class="headerlink" title="OSRF分组"></a>OSRF分组</h3><p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/OSRF%E5%88%86%E7%BB%84.png" alt="OSRF 分组"></p>
<ul>
<li><p><strong>版本</strong>：占<strong>8字节</strong>，当前版本号为2</p>
</li>
<li><p><strong>类型</strong>：占<strong>8字节</strong>，OSRF的5种类型</p>
</li>
<li><p><strong>分组长度</strong>：占<strong>16字节</strong>，分组总长度</p>
</li>
<li><p><strong>路由器标识符</strong>：占<strong>32字节</strong>，发送端路由器某一个接口的IP地址</p>
</li>
<li><p><strong>区域标识符</strong>：占<strong>32字节</strong>，分组所在区域</p>
</li>
<li><p><strong>检验和</strong>：占<strong>16字节</strong>，检测分组差错</p>
</li>
<li><p><strong>鉴别类型</strong>：占<strong>16字节</strong>，1——口令鉴别</p>
<p>​                                       0——不用鉴别</p>
</li>
<li><p><strong>鉴别</strong>：鉴别类型为0时就填入0，鉴别类型为1时就填入8字符的口令</p>
</li>
</ul>
<h3 id="OSRF特点"><a href="#OSRF特点" class="headerlink" title="OSRF特点"></a>OSRF特点</h3><ul>
<li>OSPF允许管理员给每条路由指派不同的代价<sub>时延长的就设计较高的代价</sub></li>
<li>多路径间的负载平衡</li>
<li>具有鉴别功能<sub>简单口令鉴别</sub></li>
<li>OSPF支持可变长度的子网划分和无分类的编址CIDR3</li>
<li>每一个链路带上32位序号，用来区分旧的更新和新的更新</li>
</ul>
<h3 id="OSRF的五种分组类型"><a href="#OSRF的五种分组类型" class="headerlink" title="OSRF的五种分组类型"></a>OSRF的五种分组类型</h3><ul>
<li>类型1，问候分组：确定和维护邻居路由器可达性</li>
<li>类型2，数据库描述分组：描述自己链路状态数据库</li>
<li>类型3，链路状态请求分组：向邻居请求发送某些链路状态的详细信息</li>
<li>类型4，链路状态更新分组：用洪泛法对全网更新链路状态</li>
<li>类型5，链路状态确认分组：对链路状态更新确认</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/OSRF%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.png" alt="OSRF基本操作"></p>
<h4 id="多点接入网络OSRF"><a href="#多点接入网络OSRF" class="headerlink" title="多点接入网络OSRF"></a>多点接入网络OSRF</h4><p>选举<strong>指定路由器DR</strong>和<strong>备用指定路由器BDR</strong></p>
<p>所以非DR、BDR只与DR&#x2F;BDR建立邻居关系</p>
<p>邻居关系数：$\dfrac {n(n-1)}2\rightarrow 2(n-2)+1$</p>
<h2 id="边界网关协议-BGP"><a href="#边界网关协议-BGP" class="headerlink" title="边界网关协议 BGP"></a>边界网关协议 BGP</h2><h3 id="BGP使用环境"><a href="#BGP使用环境" class="headerlink" title="BGP使用环境"></a>BGP使用环境</h3><ul>
<li>互联网的规模太大，使得自治系统之间路由选择非常困难(代价度量不同)。对于自治系统之间的路由选择，要寻找最佳路由是很不现实的。<ol>
<li>当一条路径通过几个不同AS时，要想对这样的路径计算出有意义的代价是不太可能的。</li>
<li><strong>比较合理的做法是在AS之间交换“可达性”信息</strong>。</li>
</ol>
</li>
<li>自治系统之间的路由选择必须考虑有关策略。</li>
<li>因此，边界网关协议BGP只能是力求寻找一条能够到达目的网络且<strong>比较好的路由</strong>（不能兜圈子)，而并非要寻找一条最佳路由。</li>
</ul>
<h3 id="BGP交换路由信息"><a href="#BGP交换路由信息" class="headerlink" title="BGP交换路由信息"></a>BGP交换路由信息</h3><ul>
<li>每一个自治系统的管理员要选择至少一个路由器作为该自治系统的”<strong>BGP发言人</strong>”(BGP speaker)。往往就是BGP边界路由器</li>
<li>一个 BGP发言人与其他自治系统中的BGP发言人要交换路由信息,就要先建立<strong>TCP 连接</strong>(端口179)，然后在此连接上交换 BGP报文以建立<strong>BGP会话</strong>(session)，利用 BGP会话交换路由信息。</li>
<li>使用TCP连接能提供可靠的服务，也简化了路由选择协议。</li>
<li>使用TCP连接交换路由信息的两个 BGP发言人，彼此成为对方的<strong>邻站</strong>(neighbor)或*<strong>对等站</strong>(peer)。</li>
<li>BPG发言人还需运行自己内部网关协议GIP</li>
</ul>
<h3 id="BGP协议特点"><a href="#BGP协议特点" class="headerlink" title="BGP协议特点"></a>BGP协议特点</h3><ul>
<li><strong>BGP支持CIDR</strong>，因此 BGP的路由表也就应当包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个<strong>自治系统序列</strong></li>
<li>在BGP刚刚运行时，BGP的邻站是交换整个的 BGP路由表。但以后只需要在发生变化时<strong>更新有变化的部分</strong>。<strong>这样做对节省网络带宽和减少路由器的处理开销都有好处</strong>。</li>
</ul>
<h3 id="BGP-4共使用四种报文"><a href="#BGP-4共使用四种报文" class="headerlink" title="BGP-4共使用四种报文"></a>BGP-4共使用四种报文</h3><ul>
<li>打开(OPEN)报文，用来与相邻的另一个BGP发言人建立关系。</li>
<li>更新(UPDATE)报文，用来发送某一路由的信息，以及列出要撤消的多条路由。</li>
<li>保活(KEEPALIVE)报文，用来确认打开报文和周期性地证实邻站关系。</li>
<li>通知(NOTIFICATION)报文，用来发送检测到的差错。</li>
</ul>
<h2 id="路由协议比较"><a href="#路由协议比较" class="headerlink" title="路由协议比较"></a>路由协议比较</h2><p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE%E6%AF%94%E8%BE%83.png" alt="路由协议比较"></p>
<h2 id="IP数据报"><a href="#IP数据报" class="headerlink" title="IP数据报"></a>IP数据报</h2><h2 id="地址解析协议ARP"><a href="#地址解析协议ARP" class="headerlink" title="地址解析协议ARP"></a>地址解析协议ARP</h2><h3 id="IP地址-amp-硬件地址"><a href="#IP地址-amp-硬件地址" class="headerlink" title="IP地址 &amp; 硬件地址"></a>IP地址 &amp; 硬件地址</h3><ul>
<li>IP地址<sub>32位</sub>与硬件地址<sub>48位</sub>是不同的地址。</li>
<li>从层次的角度看，<ol>
<li><strong>硬件地址</strong>(或<strong>物理地址</strong>)是<strong>数据链路层</strong>和<strong>物理层</strong>使用的地址<sub>适配器中ROM中</sub>。</li>
<li>IP地址是<strong>网络层和以上各层</strong>使用的地址，是一种<strong>逻辑地址</strong>（称I地址是逻辑地址是因为IP地址是用软件实现的<sub>内存中</sub>)。</li>
</ol>
</li>
<li>在IP层抽象的互联网上只能看到<strong>IP数据报</strong></li>
<li>虽然在IP数据报首部有源站IP地址，但路由器只根据目的站的IP地址的网络号进行路由选择。<br>在局域网的链路层，只能看见MAC帧。</li>
</ul>
<h3 id="地址解析协议ARP-1"><a href="#地址解析协议ARP-1" class="headerlink" title="地址解析协议ARP"></a>地址解析协议ARP</h3><p><strong>ARP 作用</strong>:从网络层使用的IP地址，解析出在数据链路层使用的硬件地址。</p>
<ul>
<li><p>被系统自动调用，用户不知道过程</p>
</li>
<li><p>不管网络层使用的是什么协议，在实际网络的链路上传送数据帧时，最终还是必须使用<strong>硬件地址</strong>。</p>
</li>
<li><p>每一个主机都设有一个<strong>ARP高速缓存(ARP cache)<strong>，里面有所在的局域网上的各主机和路由器的IP地址到硬件地址的</strong>映射表</strong>。</p>
</li>
</ul>
<p>$$<br>&lt;IP address; MAC address; TTL&gt;<br>$$</p>
<ul>
<li><p>当主机A欲向<strong>本局域网</strong>上的某个主机B发送IP数据报时，就先在其ARP高速缓存中查看有无主机B的IP地址。</p>
<ol>
<li>如有，就可查出其对应的硬件地址，再将此硬件地址写入MAC帧，然后通过局域网将该MAC帧发往此硬件地址。</li>
<li>如没有，AR进程在本局域网上<strong>广播发送</strong>一个<strong>ARP请求分组</strong>。收到<strong>ARP响应分组</strong>后，将得到的IP地址到硬件地址的映射写入ARP高速缓存。</li>
</ol>
</li>
<li><p><strong>ARP请求分组</strong>:包含发送方硬件地址&#x2F;发送方IP地址&#x2F;目标方硬件地址(未知时填O)&#x2F;目标方IP地址。</p>
</li>
<li><p><strong>本地广播&#x2F;ARP请求</strong>(路由器不转发ARP请求)。</p>
</li>
<li><p><strong>ARP响应分组</strong><sub>单播</sub>:包含发送方硬件地址&#x2F;发送方IP地址&#x2F;目标方硬件地址&#x2F;目标方IP地址。</p>
</li>
<li><p><strong>ARP分组封装在物理网络的帧中传输</strong>。</p>
</li>
</ul>
<h3 id="ARP高速缓存的作用"><a href="#ARP高速缓存的作用" class="headerlink" title="ARP高速缓存的作用"></a>ARP高速缓存的作用</h3><ul>
<li><strong>存放最近获得的IP地址到MAC地址的绑定，以减少ARP广播的数量。</strong></li>
<li>为了减少网络上的通信量，主机A在发送其ARP请求分组时，就将自己的IP地址到硬件地址的映射写入ARP请求分组。</li>
<li>当主机B收到A的ARP请求分组时，就将主机A的这一地址映射写入主机B自己的ARP高速缓存中。这对主机B以后向A发送数据报时就更方便了。</li>
</ul>
<h2 id="IP数据报格式"><a href="#IP数据报格式" class="headerlink" title="IP数据报格式"></a>IP数据报格式</h2><ul>
<li>一个IP数据报由<strong>首部</strong>和<strong>数据</strong>两部分组成。</li>
<li>首部的前一部分是<strong>固定长度</strong>，共<strong>20字节</strong>，是所有IP数据报必须具有的。</li>
<li>在首部的固定部分的后面是一些可选字段，其长度是可变的<sub>最大长度40字节</sub>。</li>
</ul>
<p><img src="C:/Users/Jarrycow/Documents/图片/IP数据报.png" alt="IP 数据报"></p>
<ul>
<li><p><strong>版本</strong>：占<strong>4位</strong>，指<strong>IP协议版本</strong>，数值为4——$01\ 00$</p>
</li>
<li><p><strong>首部长度</strong>：占<strong>4位</strong>，指<strong>数据报首部长度</strong>，可表示的最大数值是15个单位,因此IP的首部长度的最大值是60字节。【基本单位：4B】</p>
</li>
<li><p><strong>填充</strong>：使得可变部分为4字节的整数倍</p>
</li>
<li><p><strong>区分服务</strong>：占<strong>8位</strong>，无实际含义</p>
</li>
<li><p><strong>总长度</strong>：占<strong>16位</strong>，指<strong>数据报总长度</strong>，**<font color="orange">总长度不得超过65535字节(MTU)</font>**【基本单位：1B】</p>
</li>
<li><p><strong>标识</strong>：占<strong>16位</strong>，分片后的字段具有相同标识<sub>不是序号</sub></p>
</li>
<li><p><strong>标志</strong>：占<strong>3位</strong>，最低位$MF$——$MF&#x3D;1$：还有分片；</p>
<p>​                                                    $MF&#x3D;0$：最后一个分片</p>
<p>​                          中间位$DF$——$DF&#x3D;0$：允许分片</p>
<p>​                                                     $DF&#x3D;1$：不允许分片<sub>若长度$\gt MTU$，则丢弃且ICMP向源主机报告</sub></p>
<p>​                            保留位：0</p>
</li>
<li><p><strong>片位移</strong>：占<strong>13位</strong>，较长的分组分片后某片在原分组相对位置，片偏移以8个字节为偏移单位【基本单位：8B】</p>
<p>​                                $偏移&#x3D;原字节位置&#x2F;8$</p>
</li>
<li><p><strong>生存时间TTL</strong>：占<strong>8位</strong>，网络中可通过路由器最大值(防止IP数据报在网络中永久兜圈· )</p>
</li>
<li><p><strong>协议</strong>：占<strong>8位</strong>，指出数据报携带的数据使用何种协议</p>
<table>
<thead>
<tr>
<th>协议</th>
<th>ICMP</th>
<th>IGMP</th>
<th>TCP</th>
<th>UDP</th>
<th>IPv6</th>
<th>OSPF</th>
</tr>
</thead>
<tbody><tr>
<td><strong>字段</strong></td>
<td>1</td>
<td>2</td>
<td>6</td>
<td>17</td>
<td>41</td>
<td>89</td>
</tr>
</tbody></table>
</li>
<li><p><strong>首部检验和</strong>：占<strong>16位</strong>，只检验数据报的首部，不检验数据部分<img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/%E9%A6%96%E9%83%A8%E6%A3%80%E9%AA%8C%E5%92%8C.png" alt="首部检验和"></p>
</li>
<li><p><strong>源地址</strong>：占<strong>4字节</strong>【传输过程不变】</p>
</li>
<li><p><strong>目的地址</strong>：占<strong>4字节</strong>【传输过程不变】</p>
</li>
<li><p><strong>可变部分</strong>：用来支持<strong>排错</strong>、<strong>测量</strong>以及<strong>安全</strong>等措施，内容很丰富。</p>
<ul>
<li>选项字段的长度可变，<strong>从1个字节到40个字节不等</strong>，取决于所选择的项目。</li>
<li>增加首部的可变部分是为了增加IP数据报的功能，但这同时也使得IP数据报的首部长度成为可变的。这就增加了每一个路由器处理数据报的开销。</li>
<li><strong>实际上这些选项很少被使用</strong>。</li>
</ul>
</li>
<li><p><strong>填充</strong>：0填充，确保IP首部长度为4整数倍</p>
</li>
</ul>
<h3 id="静态路由配置"><a href="#静态路由配置" class="headerlink" title="静态路由配置"></a>静态路由配置</h3><ul>
<li>特定主机路由网络前缀最长，最具体</li>
<li>默认路由网络前缀最短，最模糊</li>
<li>多条路由可选，选最长前缀</li>
</ul>
<table>
<thead>
<tr>
<th>目的网络</th>
<th>下一跳</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>直接连接路由器的网络</td>
<td>连接网络的接口</td>
<td>直连</td>
</tr>
</tbody></table>
<p><strong>路由器的路由表</strong></p>
<table>
<thead>
<tr>
<th align="center">目的主机所在网络</th>
<th align="center">下一跳地址</th>
</tr>
</thead>
<tbody><tr>
<td align="center">直接连接的网络</td>
<td align="center">直接交付，接口X</td>
</tr>
<tr>
<td align="center">非直接连接的网络</td>
<td align="center">下一个路由器的接入地址</td>
</tr>
</tbody></table>
<p><strong>特定主机路由</strong></p>
<table>
<thead>
<tr>
<th>目的网络</th>
<th>下一跳</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>特定主机CIDR</td>
<td>通向的路由器接口</td>
<td>静态</td>
</tr>
</tbody></table>
<ul>
<li><p>虽然互联网所有的分组转发都是<strong>基于目的主机所在的网络</strong>，但在大多数情况下都允许有这样的特例，即<strong>为特定的目的主机指明一个路由</strong>。</p>
</li>
<li><p>采用<strong>特定主机路由</strong>可使网络管理人员能更方便地控制网络和测试网络，同时也可在需要考虑某种安全问题时采用这种特定主机路由。</p>
<blockquote>
<p>主机IP地址 | 下一跳地址</p>
</blockquote>
</li>
</ul>
<p><strong>默认路由</strong></p>
<table>
<thead>
<tr>
<th>目的网络</th>
<th>下一跳</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>0.0.0.0&#x2F;0</td>
<td>默认路由地址</td>
<td>静态</td>
</tr>
</tbody></table>
<ul>
<li>对于相同下一跳的不同目的网络的路由条目，可用默认路由替代</li>
<li>路由器还可采用<strong>默认路由</strong>以**<sub>优先级最低</sub>减少路由表所占用的空间和搜索路由表所用的时间**。</li>
<li>这种转发方式在一个网络只有<strong>很少的对外连接</strong>时是很有用的。</li>
<li>默认路由在主机发送IP数据报时往往更能显示出它的好处。</li>
<li>如果一个主机连接在一个小网络上，而这个网络只用一个路由器和互联网连接，那么在这种情况下使用默认路由是非常合适的。</li>
</ul>
<h4 id="环路错误"><a href="#环路错误" class="headerlink" title="环路错误"></a>环路错误</h4><ul>
<li>配置错误</li>
<li>聚合了不存在的网路</li>
<li>网络故障</li>
</ul>
<p><strong>路由条目类型</strong></p>
<ul>
<li>直连网络</li>
<li>静态路由(人工配置)</li>
<li>动态路由(路由选择协议)</li>
</ul>
<p><strong>特殊条目</strong></p>
<ul>
<li>默认路由：目的网络0.0.0.0，掩码0.0.0.0</li>
<li>特定主机路由：目的网络：主机IP；掩码255.255.255.255</li>
<li>黑洞路由：下一跳为null</li>
</ul>
<h3 id="IP层转发分组流程"><a href="#IP层转发分组流程" class="headerlink" title="IP层转发分组流程"></a>IP层转发分组流程</h3><p><strong>路由器分组转发算法</strong></p>
<ol>
<li>从数据报的首部提取目的主机的IP地址$D$，得出目的网络地址为$N$</li>
<li>若网络$N$与此路由器直接相连<sub>在同一个网段</sub>，则把数据报<strong>直接交付</strong>目的主机$D$；否则是间接交付，执行(3)</li>
<li>若路由表中有目的地址为$D$的<strong>特定主机路由</strong>，则把数据报传送给路由表中所指明的下一跳路由器；否则，执行(4)</li>
<li>若路由表中有<strong>到达网络$N$的路由</strong>，则把数据报传送给路由表指明的下一跳路由器；否则，执行(5)</li>
<li>若路由表中有一个<strong>默认路由</strong>，则把数据报传送给路由表中所指明的默认路由器;否则，执行(6)</li>
<li>报告转发分组出错</li>
</ol>
<p><strong>路由器修改内容</strong></p>
<ul>
<li>私有地址和Internet主机通信时，须由NAT路由器进行网络地址转换，把源IP地址转换为NAT路由器的一个全球IP地址</li>
<li>每经过一个路由器，TTL减1</li>
<li>若分组长度超过MTU，总长度、标志、片偏移发生变化</li>
</ul>
<h4 id="主机发送IP数据报"><a href="#主机发送IP数据报" class="headerlink" title="主机发送IP数据报"></a>主机发送IP数据报</h4><p>判断目的主机是否与自己在同一网络</p>
<p>若在，<strong>直接交付</strong></p>
<p>若不在，<strong>间接交付</strong>，传输给主机所在网络的<strong>默认网关</strong>(路由器)进行转发</p>
<h4 id="路由器转发IP数据报"><a href="#路由器转发IP数据报" class="headerlink" title="路由器转发IP数据报"></a>路由器转发IP数据报</h4><ol>
<li><p>检查IP数据报首部是否出错</p>
<p>若出错，直接丢弃IP数据报并报告主机</p>
<p>若无错，进行转发</p>
</li>
<li><p>根据IP数据报目的地址在路由表中查找匹配的条目</p>
<p>若找到匹配条目，转发给条目指示下一帧</p>
<p>若找不到，丢弃并报告源主机</p>
</li>
</ol>
<h1 id="网际控制报文协议ICMP"><a href="#网际控制报文协议ICMP" class="headerlink" title="网际控制报文协议ICMP"></a>网际控制报文协议ICMP</h1><ul>
<li>为了更有效地转发IP数据报和<strong>提高交付成功</strong>的机会，在网际层使用了网际控制报文协议ICMP (Internet Control Message Protocol)。</li>
<li>ICMP是互联网的标准协议。</li>
<li>ICMP允许主机或路由器报告差错情况和提供有关异常情况的报告。</li>
<li>但ICMP不是高层协议（看起来好像是高层协议，因为ICMP报文是装在<strong>IP数据报</strong>中，作为其中的数据部分)，而是IP层的协议。</li>
</ul>
<h3 id="ICMP报文格式"><a href="#ICMP报文格式" class="headerlink" title="ICMP报文格式"></a>ICMP报文格式</h3><p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/ICMP%E6%A0%BC%E5%BC%8F.png" alt="ICMP格式"></p>
<ul>
<li><strong>类型</strong>：占<strong>8字节</strong>，产生差错的分类</li>
<li><strong>代码</strong>：占<strong>8字节</strong>，大类型下不同情况</li>
<li><strong>检验和</strong>：占<strong>16字节</strong>，检验<strong>整个</strong>ICMP报文</li>
</ul>
<h2 id="ICMP-报文的种类"><a href="#ICMP-报文的种类" class="headerlink" title="ICMP 报文的种类"></a>ICMP 报文的种类</h2><ul>
<li>ICMP报文的种类有两种，即<strong>ICMP差错报告报文</strong>和<strong>ICMP询问报文</strong>。</li>
</ul>
 <table border="1" >
      <thead>
        <tr align="center"  bgcolor="#73B0C7">
          <th>ICMP报告报文</th>
          <th>类型的值</th>
          <th>ICMP报文的类型</th>
        </tr>
      </thead>
     <tbody>
        <tr align="center" >
          <th rowspan="4">差错报告报文</th>
          <th>3</th>
          <th>终点不可达</th>
        </tr>
        <tr align="center" >
          <th>11</th>
          <th>时间超过</th>
        </tr>
        <tr align="center" >
          <th>12</th>
          <th>参数问题</th>
        </tr>
        <tr align="center" >
          <th>5</th>
          <th>改变路由（重定向）(Redirect)</th>
        </tr>
      <tr align="center" >
          <th rowspan="2">询问报文</th>
          <th>8或0</th>
          <th>回送(Echo)请求或回答</th>
        </tr>
        <tr align="center" >
          <th>13或14</th>
          <th>时间戳(Timestamp)请求或回答</th>
        </tr>
      </tbody>
    </table>


<h3 id="ICMP差错报文"><a href="#ICMP差错报文" class="headerlink" title="ICMP差错报文"></a>ICMP差错报文</h3><ul>
<li><strong>终点不可达</strong>：当路由器或主机不能交付数据报时就向源点发送终点不可达报文。</li>
<li><strong>时间超过</strong>：当路由器收到生存时间为零的数据报时，除丢弃该数据报外还要向源点发送<font color="blue">时间超过报文</font>。当终点在预先规定的时间内不能收到个数据报的全部数据报片时，就把已收到的数据报片都丢弃，并向源点发送时间超过报文。</li>
<li><strong>参数问题</strong>：当路由器或目的主机收到的数据报的首部中有的字段的值不正确是，就丢弃该数据报，并向原点发送参数问题报文。</li>
<li><strong>改变路由（重定向）（Redirect）</strong>：路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器（可通过<font color="blue">更好的路由</font>）。</li>
<li><strong>源点抑制</strong>：拥塞</li>
</ul>
<h3 id="不应发送ICMP-差错报告报文情况"><a href="#不应发送ICMP-差错报告报文情况" class="headerlink" title="不应发送ICMP 差错报告报文情况"></a>不应发送ICMP 差错报告报文情况</h3><ul>
<li>对ICMP差错报告报文不再发送ICMP 差错报告报文。</li>
<li>对第一个分片的数据报片的所有后续数据报片都不发送 ICMP 差错报告报文。</li>
<li>对具有多播地址的数据报都不发送ICMP 差错报告报文。</li>
<li>对具有特殊地址的数据报不发送ICMP差错报告报文。</li>
</ul>
<h3 id="ICMP询问报文"><a href="#ICMP询问报文" class="headerlink" title="ICMP询问报文"></a>ICMP询问报文</h3><ul>
<li><strong>回送请求和回答报文</strong>：ICMP回送请求报文是由主机或路由器向一个特定的目的主机发出的询问。收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文。这种询问报文用来<font color="blue">测试目的站是否可达以及了解其有关状态</font>。</li>
<li><strong>时间戳请求和回答报文</strong>：ICMP时间戳请求报文是请<font color="blue">某台主机或路由器回答当前的日期和时间</font>。在ICMP时间戳回答报文中有一个32位的字段，其中写入的整数代表从1900年1月1日起到当前时刻一共有多少秒。时间戳请求与回答可用于<font color="blue">时钟同步和时间测量</font>。</li>
</ul>
<h2 id="路由器的构成"><a href="#路由器的构成" class="headerlink" title="路由器的构成"></a>路由器的构成</h2><ul>
<li>路由器是一种典型的网络层设备。</li>
<li>路由器是互联网中的关键设备。</li>
<li>路由器的主要作用是:<ol>
<li>连通不同的网络。</li>
<li>选择信息传送的线路。选择通畅快捷的近路，能大大提高通信速<br>度，减轻网络系统通信负荷，节约网络系统资源，提高网络系统畅通率，从而让网络系统发挥出更大的效益来。</li>
</ol>
</li>
</ul>
<h1 id="lPV6"><a href="#lPV6" class="headerlink" title="lPV6"></a>lPV6</h1><h2 id="lPv6的基本首部"><a href="#lPv6的基本首部" class="headerlink" title="lPv6的基本首部"></a>lPv6的基本首部</h2><h3 id="IPv6基本变化"><a href="#IPv6基本变化" class="headerlink" title="IPv6基本变化"></a>IPv6基本变化</h3><ul>
<li><strong>更大的地址空间</strong>。IPv6将地址从IPv4的32位增大到了128位。</li>
<li><strong>扩展的地址层次结构</strong>。</li>
<li><strong>灵活的首部格式</strong>。IPv6定义了许多可选的扩展首部。</li>
<li><strong>改进的选项</strong>。IPv6 允许数据报包含有选项的控制信息，其选项放在有效载荷中。</li>
<li><strong>允许协议继续扩充</strong>。</li>
<li>**支持即插即用(即自动配置)**。因此IPv6不需要使用DHCP。</li>
<li><strong>支持资源的预分配</strong>。IPv6支持实时视像等要求，保证一定的带宽和时延的应用。</li>
<li><strong>IPv6首部改为8字节对齐</strong>。首部长度必须是8字节的整数倍。原来的IPv4首部是4字节对齐。</li>
</ul>
<h3 id="IPv6数据报一般格式"><a href="#IPv6数据报一般格式" class="headerlink" title="IPv6数据报一般格式"></a>IPv6数据报一般格式</h3><ul>
<li><strong>基本首部(base header)</strong></li>
<li>**有效载荷(payload)**。有效载荷也称为净负荷。有效载荷允许有零个或多个扩展首部(extension header)，再后面是数据部分。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/IPV6.png" alt="IPv6数据报格式"></p>
<ul>
<li><strong>版本</strong>：占<strong>4字节</strong>，协议的版本，数值为6</li>
<li><strong>通信量类</strong>：占<strong>8字节</strong>，区分不同IPv6数据报的类别和优先级</li>
<li><strong>流标号</strong>：占<strong>20字节</strong>。“流”是互联网络上从特定源点到特定终点的一系列数据报，“流”所经过的路径上的路由器都保证指明的服务质量。所有属于同一个流的数据报都具有同样的流标号。</li>
<li><strong>有效载荷长度</strong>：占<strong>16字节</strong>，指明数据报除基本首部外字节数，最大值为64KB</li>
<li><strong>下一个首部</strong>：占<strong>8字节</strong>，相当于IPv4的协议字段</li>
<li><strong>跳数限制</strong>：占<strong>8字节</strong>，路由器转发最大次数</li>
<li><strong>源地址</strong>：占<strong>128字节</strong>，</li>
<li><strong>目的地址</strong>：占<strong>128字节</strong>，</li>
</ul>
<h3 id="扩展首部"><a href="#扩展首部" class="headerlink" title="扩展首部"></a>扩展首部</h3><ul>
<li>逐跳选项</li>
<li>路由选择</li>
<li>分片</li>
<li>鉴别</li>
<li>封装安全有效载荷</li>
<li>目的站选项</li>
</ul>
<h2 id="IPv6的地址"><a href="#IPv6的地址" class="headerlink" title="IPv6的地址"></a>IPv6的地址</h2><ul>
<li><strong>单播</strong>(unicast):传统的点对点通信。</li>
<li><strong>多播</strong>(multicast):一点对多点的通信。</li>
<li><strong>任播</strong>(anycast):这是IPv6增加的一种类型。任播的目的站是一组计算机，但数据报在交付时只交付其中的一个，通常是距离最近的一个。</li>
</ul>
<h3 id="结点和接口"><a href="#结点和接口" class="headerlink" title="结点和接口"></a>结点和接口</h3><ul>
<li><p>IPv6将实现IPv6的主机和路由器均称为<strong>结点</strong>。</p>
</li>
<li><p>一个结点就可能有多个与链路相连的<strong>接口</strong>。</p>
</li>
<li><p>IPv6地址是分配给结点上面的接口的。</p>
<ol>
<li><p>一个接口可以有多个单播地址。</p>
</li>
<li><p>其中的任何一个地址都可以当作到达该结点的目的地址。<br>即一个结点接口的单播地址可用来唯一地标志该结点。</p>
</li>
</ol>
</li>
</ul>
<h3 id="IPv6地址分类"><a href="#IPv6地址分类" class="headerlink" title="IPv6地址分类"></a>IPv6地址分类</h3><p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/IPV6%E5%9C%B0%E5%9D%80.png" alt="IPv6地址分类"></p>
<h2 id="从IPv4向-IPv6过渡"><a href="#从IPv4向-IPv6过渡" class="headerlink" title="从IPv4向 IPv6过渡"></a>从IPv4向 IPv6过渡</h2><ul>
<li>IPv6必须<strong>向后兼容</strong>IPv4</li>
</ul>
<h4 id="IPv4向IPv6过渡的策略"><a href="#IPv4向IPv6过渡的策略" class="headerlink" title="IPv4向IPv6过渡的策略"></a>IPv4向IPv6过渡的策略</h4><ol>
<li>双协议栈</li>
<li>隧道技术</li>
</ol>
<h4 id="双协议栈"><a href="#双协议栈" class="headerlink" title="双协议栈"></a>双协议栈</h4><ul>
<li>双协议栈(dual stack)是指在完全过渡到IPv6之前，使一部分主机(或路由器）<strong>装有两个协议栈，一个IPv4和一个IPv6</strong></li>
<li>双协议栈的主机(或路由器）记为IPv6&#x2F;IPv4，表明它<strong>同时具有两种IP地址:一个IPv6地址和一个IPv4地址</strong></li>
<li>双协议栈主机在和IPv6主机通信时是采用IPv6地址，而和IPv4主机通信时就采用IPv4地址。</li>
<li>根据DNS返回的地址类型可以确定使用IPv4地址还是IPv6地址。</li>
</ul>
<h4 id="隧道技术"><a href="#隧道技术" class="headerlink" title="隧道技术"></a>隧道技术</h4><ul>
<li>在IPv6数据报要进入IPv4网络时，<strong>把IPv6数据报封装成为IPv4数据报</strong>，整个的IPv6数据报变成了IPv4数据报的<strong>数据部分</strong>。</li>
<li>当IPv4数据报离开IPv4网络中的隧道时，再把数据部分(即原来的IPv6数据报）交给主机的IPv6协议栈。</li>
</ul>
<h2 id="ICMPv6"><a href="#ICMPv6" class="headerlink" title="ICMPv6"></a>ICMPv6</h2><ul>
<li>IPv6也不保证数据报的可靠交付，因为互联网中的路由器可能会丢弃数据报。</li>
<li>因此IPv6也需要使用ICMP来反馈一些差错信息。新的版本称为ICMPv6。</li>
<li>ICMPv6是面向报文的协议，它利用报文来报告差错，获取信息，探测邻站或管理多播通信。</li>
</ul>
<h4 id="ICMPv6报文的分类"><a href="#ICMPv6报文的分类" class="headerlink" title="ICMPv6报文的分类"></a>ICMPv6报文的分类</h4><ul>
<li>差错报文</li>
<li>信息报文</li>
<li>邻站发现报文(ND协议)</li>
<li>组成员关系报文(MLD协议)</li>
</ul>
<h1 id="IP多播"><a href="#IP多播" class="headerlink" title="IP多播"></a>IP多播</h1><ul>
<li>再互联网上进行多播就是<strong>IP多播</strong></li>
<li>在多播数据报的目的地址写入的是<strong>多播组</strong>的标识符</li>
<li>多播组的标识符就是IP地址中的<strong>D类地址（多播地址)</strong></li>
<li>多播地址只能用于<strong>目的地址</strong>，<strong>不能用于源地址</strong>。</li>
</ul>
<h3 id="在局域网上进行硬件多播"><a href="#在局域网上进行硬件多播" class="headerlink" title="在局域网上进行硬件多播"></a>在局域网上进行硬件多播</h3><ul>
<li>互联网号码指派管理局IANA拥有的以太网地址块的高24位为00-00-5E</li>
<li>IANA使用的<strong>以太网多播地址块</strong>的范围是<br>从<strong>01-00-5E-00-00-00</strong><br>到<strong>01-00-5E-7F-FF-FF</strong></li>
<li>在每一个地址中，只有<strong>23位</strong>可用作多播。</li>
<li>D类IP地址可供分配的有28位，在这28位中的前5位不能用来构成以太网硬件地址。</li>
</ul>
<h2 id="网际组管理协议IGMP和多播路由选择协议"><a href="#网际组管理协议IGMP和多播路由选择协议" class="headerlink" title="网际组管理协议IGMP和多播路由选择协议"></a>网际组管理协议IGMP和多播路由选择协议</h2><ul>
<li>为了使路由器知道多播组成员的信息，需要利用<strong>网际组管理协议lGMP</strong> (Internet Group Management Protocol)</li>
<li>连接在局域网上的多播路由器还必须和互联网上的其他多播路由器协同工作，以便把多播数据报用最小代价传送给所有的组成员。这就需要使用<strong>多播路由选择协议</strong></li>
</ul>
<h4 id="IGMP使用范围"><a href="#IGMP使用范围" class="headerlink" title="IGMP使用范围"></a>IGMP使用范围</h4><p>IGMP 并非在互联网范围内对所有多播组成员进行管理的协议，强调了IGMP的本地使用范围</p>
<h4 id="IGMP是整个网际协议IP的一个组成部分"><a href="#IGMP是整个网际协议IP的一个组成部分" class="headerlink" title="IGMP是整个网际协议IP的一个组成部分"></a>IGMP是整个网际协议IP的一个组成部分</h4><ul>
<li>和ICMP 相似，<strong>IGMP使用IP数据报</strong>传递其报文(即IGMP报文加上IP首部构成IP数据报)，但它也向IP提供服务。</li>
<li>因此，我们不把IGMP看成是一个单独的协议，而是属于整个网际协议IP的一个组成部分。</li>
</ul>
<h4 id="IGMP工作阶段"><a href="#IGMP工作阶段" class="headerlink" title="IGMP工作阶段"></a>IGMP工作阶段</h4><ul>
<li><strong>第一阶段:加入多播组</strong><ol>
<li>当某个主机加入新的多播组时，该主机应向多播组的多播地址发送IGMP报文，声明自己要成为该组的成员。</li>
<li>本地的多播路由器收到IGMP报文后，将组成员关系转发给互联网上的其他多播路由器。</li>
</ol>
</li>
<li><strong>第二阶段:探询组成员变化情况</strong><ol>
<li>因为组成员关系是动态的，因此本地多播路由器要周期性地探询<br>本地局域网.上的主机，以便知道这些主机是否还继续是组的成员。</li>
<li>只要对某个组有一个主机响应，那么多播路由器就认为这个组是<br>活跃的。</li>
<li>但一个组在经过几次的探询后仍然没有一个主机响应，则不再将<br>该组的成员关系转发给其他的多播路由器。</li>
</ol>
</li>
</ul>
<h4 id="多播路由选择协议在转发多播数据报时使用方法"><a href="#多播路由选择协议在转发多播数据报时使用方法" class="headerlink" title="多播路由选择协议在转发多播数据报时使用方法"></a>多播路由选择协议在转发多播数据报时使用方法</h4><ol>
<li>洪泛与剪除<sub>构造转发树</sub><ul>
<li>这种方法适合于较小的多播组，而所有的组成员接入的局域网也相邻接的。</li>
<li>一开始，路由器转发多播数据报使用洪泛的方法（这就是广播）</li>
<li>为了避免兜圈子，采用了叫做反向路径广播<strong>RPB</strong>(Reverse PathBroadcasting)的策略。</li>
</ul>
</li>
<li>隧道技术(tunneling)<ul>
<li>隧道技术适用于多播组再地理上很分散的情况</li>
</ul>
</li>
<li>基于核心的发现技术<ul>
<li>这种方法对于多播组的大小在较大范围内变化时都适合。</li>
<li>这种方法是对每一个多播组G指定一个<strong>核心</strong>(core)路由器，给出它的<strong>IP单播地址</strong>。</li>
<li>核心路由器按照前面讲过的方法创建出对应于多播组G的转发树。</li>
</ul>
</li>
</ol>
<h4 id="RPB要点"><a href="#RPB要点" class="headerlink" title="RPB要点"></a>RPB要点</h4><ul>
<li>路由器收到多播数据报时，先<strong>检查它是否是从源点经最短路在传达术的</strong>。</li>
<li>若是，就向所有其他方向转发刚才收到的多播数据报（但进入的方向除<br>外)，否则就丢弃而不转发。</li>
<li>如果存在几条同样长度的最短路径，那么只能选择一条最短路径,<br>选择的准则就是看这几条最短路径中的相邻路由器谁的<strong>IP地址最小</strong>。</li>
<li><strong>最后就得出了用来转发多播数据报的多播转发树</strong>，以后就按这个多播转发树转发多播数据报。避免了多播数据报的兜圈子，同时每一个路由器也不会接收重复的多播数据报。</li>
<li>如果在多播转发树上的某个路由器发现它的下游树枝（即叶节点方<br>向)已没有该多播组的成员。就应把它和下游的树枝一起<strong>剪除</strong></li>
<li>当某个树枝有新增加的组成员时，可以再<strong>接入</strong>到多播转发树上</li>
</ul>
<h1 id="虚拟专用网VPN-amp-网络地址转换NAT"><a href="#虚拟专用网VPN-amp-网络地址转换NAT" class="headerlink" title="虚拟专用网VPN &amp; 网络地址转换NAT"></a>虚拟专用网VPN &amp; 网络地址转换NAT</h1><h2 id="虚拟专用网-VPN"><a href="#虚拟专用网-VPN" class="headerlink" title="虚拟专用网 VPN"></a>虚拟专用网 VPN</h2><p>虚拟专用网$\star  $：在公用网络上建立专用网络的技术。之所以称其为虚拟网，是因为整个VPN网络的任意两个节点之间的连接并没有传统专网所需的端到端的物理链路，而是架构在公用网络服务商所提供的网络平台，如Internet、 ATM(异步传输模式)、Frame Relay (帧中继)等之上.的逻辑网络，用户数据在逻辑链路中传输。之所以称为专用网，是因为这种网络是为本机构的主机用于机构内部的通信，而不是用于和网络外非本机构的主机通信。</p>
<ul>
<li>由于<strong>IP地址的紧缺</strong>，一个机构能够申请到的IP地址数往往远小于本机构所拥有的主机数。</li>
<li>考虑到<strong>互联网并不很安全</strong>，一个机构内也并不需要把所有的主机接入到外部的互联网。</li>
<li>假定在一个机构内部的计算机通信也是采用TCP&#x2F;IP协议，那么从原则上讲，对于这些仅在<strong>机构内部使用</strong>的计算机就可以由本机构<strong>自行分配其IP地址</strong>。</li>
</ul>
<h3 id="专用IP地址"><a href="#专用IP地址" class="headerlink" title="专用IP地址"></a>专用IP地址</h3><ul>
<li>10.0.0.0到10.255.255.255<br>A类，或记为10.0.0.0&#x2F;8，它又称为24位块</li>
<li>172.16.0.0到172.31.255.255<br>B类，或记为172.16.0.0&#x2F;12，它又称为20位块</li>
<li>192.168.0.0到192.168.255.255<br>C类，或记为192.168.0.0&#x2F;16，它又称为16位块</li>
</ul>
<h3 id="内联网intranet-amp-外联网extranet"><a href="#内联网intranet-amp-外联网extranet" class="headerlink" title="内联网intranet &amp; 外联网extranet"></a>内联网intranet &amp; 外联网extranet</h3><ul>
<li>它们。</li>
<li>由部门A和B的内部网络所构成的虚拟专用网VPN又称为<strong>内联网</strong>(intranet)，表示部门A和B都是在同一个机构的内部。</li>
<li>一个机构和某些<strong>外部机构</strong>共同建立的虚拟专用网VPN又称为外联网(extranet)。</li>
</ul>
<h3 id="IP隧道技术"><a href="#IP隧道技术" class="headerlink" title="IP隧道技术"></a>IP隧道技术</h3><p>局域网数据报加密通过因特网给另一个局域网</p>
<h3 id="VPN-的特点"><a href="#VPN-的特点" class="headerlink" title="VPN 的特点:"></a>VPN 的特点:</h3><p>①VPN通过建立一个隧道，利用加密技术对传输数据进行加密，以保证数据的私有性和安全性。<br>②具有很好的扩充性和灵活性。<br>③VPN可以从用户和运营商角度方便进行管理。<br>④VPN可以为不同要求用户提供不同等级的服务质量保证。</p>
<p><strong>VPN的优点:</strong></p>
<p>①连接方便灵活。用户如果想与合作伙伴联网，只需双方配置安全连接信息即可。<br>②使用VPN可降低成本。通过公用的因特网连接不同网点，节省租金;<br>③传输数据安全可靠。对通过因特网传送的数据加密，保证了数据的安全;<br>④安全控制。虚拟专用网使用户可以利用ISP的设施和服务，同时又完全掌握着自己网络的控制权。<br><strong>VPN 的缺点:</strong> VPN 比普通网络更复杂，VPN 需购买专门的硬件和软件，费用比普通网络更高。</p>
<h3 id="VPN分类"><a href="#VPN分类" class="headerlink" title="VPN分类"></a>VPN分类</h3><ol>
<li><p><strong>VPN协议分类</strong></p>
<ul>
<li>PPTP、L2TP和IPSec，其中PPTP和L2TP协议工作在OSI模型的第二层，又称为二层隧道协议; </li>
<li>IPSec 是第三层隧道协议，是最常见的协议。</li>
<li>L2TP 和IPSec配合使用是目前性能最好、应用最广泛的一种。</li>
</ul>
</li>
<li><p><strong>VPN应用分类</strong><br>分别是内联网，外联网和远程接入VPN,其中内联网的各网点属于同一机构,而外联网的网点属于不同机构。</p>
<p>都是基于TCP&#x2F;IP协议的</p>
</li>
<li><p><strong>所用的设备类型分类</strong><br>网络设备提供商针对不同客户的需求，开发出不同的VPN网络设备，主要为交换机、路由器和防火墙。</p>
</li>
</ol>
<h2 id="网络地址转换-NAT"><a href="#网络地址转换-NAT" class="headerlink" title="网络地址转换 NAT"></a>网络地址转换 NAT</h2><p><strong>NAT网络地址转换：</strong>需要在专用网连接到因特网的路由器上安装NAT软件。装有NAT软件的路由器叫做NAT路由器，它至少有一个有效的外部全球IP地址。这样，所有使用本地地址的主机在和外界通信时，都要在NAT路由器上将其本地地址转换成全球IP地址，才能和因特网连接。</p>
<p><strong>NAT的优点</strong></p>
<ol>
<li>通过NAT，专用网内部主机可使用专用地址与因特网上的主机通信;</li>
<li>通过NAT，一个全球合法IP地址可被多台专用网内部主机分享使用，节省全球IP地址资源。</li>
</ol>
<p><strong>NAT的缺点：</strong>通信必须由专用网内的主机发起，专用网内部的主机不能充当服务器。</p>
<h4 id="网络地址转换过程"><a href="#网络地址转换过程" class="headerlink" title="网络地址转换过程"></a>网络地址转换过程</h4><ul>
<li>内部主机A用**本地地址$IP_A$**和互联网上主机B通信所发送的数据报必须经过NAT路由器。</li>
<li>NAT路由器将<strong>数据报的源地址$IP_A$转换成全球地址$IP_G$<strong>，并把转换结果记录到</strong>NAT地址转换表</strong>中，目的地址$IP_B$保持不变，然后发送到互联网</li>
<li>NAT路由器收到主机B发回的数据报时，知道数据报中的源地址是$IP_B$而目的地址是$IP_G$</li>
<li><strong>根据NAT转换表</strong>，NAT路由器**将目的地址$IP_G$转换为$IP_A$**，转发给最终的内部主机A。</li>
</ul>
<h4 id="网络地址端口转换NAPT"><a href="#网络地址端口转换NAPT" class="headerlink" title="网络地址端口转换NAPT"></a>网络地址端口转换NAPT</h4><ul>
<li>在路由器转发IP数据报时，NAFY 对IP地址和端口号都进行转换，对于出专用网的数据，把专用网内不<br>同的源IP地址转换为同样的全球IP地址,把源主机端口号转换为不同的新的端口号;对于入专用网的应答,NAPT<br>根据不同的目的端口号，从NAPT转换表中找到正确的目的主机;.</li>
<li>NAPT工作在网络层和传输层。.</li>
</ul>
<h1 id="多协议标记交换MPLS"><a href="#多协议标记交换MPLS" class="headerlink" title="多协议标记交换MPLS"></a>多协议标记交换MPLS</h1><h2 id="MPLS的工作原理"><a href="#MPLS的工作原理" class="headerlink" title="MPLS的工作原理"></a>MPLS的工作原理</h2><h4 id="MPLS特点"><a href="#MPLS特点" class="headerlink" title="MPLS特点"></a>MPLS特点</h4><ul>
<li>MPLS 并没有取代IP，而是作为一种<strong>IP增强技术</strong>，被广泛地应用在互联网中。</li>
<li>MPLS具有以下三个方面的特点:<ol>
<li>支持面向连接的服务质量;</li>
<li>支持流量工程，平衡网络负载;</li>
<li>有效地支持虚拟专用网VPN。</li>
</ol>
</li>
</ul>
<h4 id="MPLS-协议的基本原理"><a href="#MPLS-协议的基本原理" class="headerlink" title="MPLS 协议的基本原理"></a>MPLS 协议的基本原理</h4><ul>
<li>在<strong>MPLS域</strong>的<strong>入口</strong>处，给每一个IP数据报打上<strong>固定长度“标记”</strong>，然后对打上标记的IP数据报用<strong>硬件进行转发</strong>。</li>
<li>采用硬件技术对打上标记的IP数据报进行转发就称为<strong>标记交换</strong>。</li>
<li>“交换”也表示在转发时不再上升到第三层查找转发表，而是<strong>根据标记在第二层（链路层）用硬件进行转发</strong>。</li>
<li>MPLS域(MPLS domain)是指该域中有许多彼此相邻的路由器，并且所有的路由器都是支持MPLS技术的<strong>标记交换路由器</strong>LSR(Label Switching Router)。</li>
<li>LSR同时具有<strong>标记交换</strong>和<strong>路由选择</strong>这两种功能，标记交换功能是为了快速转发，但在这之前LSR需要使用路由选择功能构造转发表。</li>
</ul>
<h4 id="MPLS基本工作过程"><a href="#MPLS基本工作过程" class="headerlink" title="MPLS基本工作过程"></a>MPLS基本工作过程</h4><ol>
<li>MPLS域中的各LSR使用专门的<strong>标记分配协议LDP</strong>交换报文，并找出<strong>标记交换路径LSP</strong>。各LSR根据这些路径<strong>构造出分组转发表</strong>。</li>
<li>分组进入到MPLS域时，MPLS** 入口结点把分组打上标记<strong>，并按照转发表将分组转发给下一个LSR。给IP数据报打标记的过程叫做</strong>分类**(classification)。</li>
<li>一个标记仅仅在两个标记交换路由器LSR之间才有意义。分组每经过一个LSR，LSR 就要做两件事:一是<strong>转发</strong>，二是<strong>更换新的标记</strong>，即把入标记更换成为出标记。这就叫做<strong>标记对换</strong>(label swapping)。</li>
<li>当分组离开 MPLS域时，MPLS** 出口结点把分组的标记去除**。再以后就按照一般分组的转发方法进行转发。</li>
</ol>
<h4 id="转发等价类FEC"><a href="#转发等价类FEC" class="headerlink" title="转发等价类FEC"></a>转发等价类FEC</h4><ul>
<li>MPLS有个很重要的概念就是转发等价类FEC (ForwardingEquivalence Class)。</li>
<li>“<strong>转发等价类</strong>”就是路由器<strong>按照同样方式对待</strong>的IP数据报的集合。</li>
</ul>
<ol>
<li>目的IP地址与某一个特定IP地址的前缀匹配的IP数据报（这就相当于普通的IP路由器）</li>
<li>所有源地址与目的地址都相同的IP数据报;</li>
<li>具有某种服务质量需求的IP数据报。</li>
</ol>
<h2 id="MPLS首部的位置与格式"><a href="#MPLS首部的位置与格式" class="headerlink" title="MPLS首部的位置与格式"></a>MPLS首部的位置与格式</h2><ul>
<li>MPLS 并不要求下层的网络都使用面向连接的技术。</li>
<li>下层的网络并不提供打标记的手段，而IPv4数据报首部也没有多余的位置存放_MPLS 标记。</li>
<li>这就需要使用一种<strong>封装技术</strong>:在把IP数据报封装成以太网帧之前，先要插入一个MPLS 首部。</li>
<li><strong>从层次的角度看，MPLS首部就处在第二层和第三层之间。</strong></li>
</ul>
<p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/MPLS%E9%A6%96%E9%83%A8%E6%A0%BC%E5%BC%8F.png" alt="MPLS首部格式"></p>
<ul>
<li><strong>标记值</strong>（占20位)。可以同时容纳高达220个流(即1048576个流)。实际上几乎没有哪个MPLS实例会使用很大数目的流，因为通常需要管理员人工管理和设置每条交换路径。</li>
<li><strong>试验</strong>（占3位)。目前保留用作试验。</li>
<li><strong>栈S</strong>(占1位)。在有“标记栈”时使用。</li>
<li><strong>生存时间TTL</strong>(占8位)。用来防止 MPLS分组在MPLS 域中兜圈子。</li>
</ul>
<h3 id="典型路由器结构"><a href="#典型路由器结构" class="headerlink" title="典型路由器结构"></a>典型路由器结构</h3><p><img src="https://raw.githubusercontent.com/Jarrycow/picHost/main/Net/%E5%85%B8%E5%9E%8B%E8%B7%AF%E7%94%B1%E7%BB%93%E6%9E%84.png" alt="典型路由结构"></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Jarrycow</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://jarrycow.top/posts/netLayer.html">http://jarrycow.top/posts/netLayer.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Jarrycow</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
                                    <span class="chip bg-color">计算机网络</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">小钱钱，真心甜~</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'juzJ3niBL1h4HLt2fKBMqwno-9Nh9j0Va',
        appKey: 'ImefmGCqjTyJGFErzRAbYpDA',
        serverURLs: 'https://juzj3nib.lc-cn-e1-shared.com',
        notify: 'true' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

<!--酷Q推送-->


    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/posts/transportLayers.html">
                    <div class="card-image">
                        
                        <img src="/medias/featureimages/transportLayers.png" class="responsive-img" alt="传输层">
                        
                        <span class="card-title">传输层</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            传输层核心是 TCP/UDP，是很多码农接触的最底层
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-04-08
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="post-category">
                                    计算机网络
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
                        <span class="chip bg-color">计算机网络</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/dataLinkLayer.html">
                    <div class="card-image">
                        
                        <img src="/medias/featureimages/dataLinkLayer.png" class="responsive-img" alt="数据链路层">
                        
                        <span class="card-title">数据链路层</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            数据链路层可以学习接错编码和、信号复用
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-04-03
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="post-category">
                                    计算机网络
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
                        <span class="chip bg-color">计算机网络</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('20')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: Jarrycow&#39;s Blog<br />'
            + '文章作者: Jarrycow<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归Jarrycow所有, 任何形式的转载都请注明作者以及出处';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\\(', '\\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2024</span>
            
            <a href="/about" target="_blank">Jarrycow</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/Jarrycow" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:kjr000614@163.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=304295025" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 304295025" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>





    <a href="https://www.zhihu.com/people/kong-cheng-ji-14-57" class="tooltipped" target="_blank" data-tooltip="关注我的知乎" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>





    <a href="https://space.bilibili.com/xxx" class="tooltipped" target="_blank" data-tooltip="在B站上关注我" data-position="top" data-delay="50">
        <i class="fas fa-play-circle"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 白天和黑夜主题 -->
<div class="stars-con">
    <div id="stars"></div>
    <div id="stars2"></div>
    <div id="stars3"></div>  
</div>

<script>
    function switchNightMode() {
        $('<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>').appendTo($('body')),
        setTimeout(function () {
            $('body').hasClass('DarkMode') 
            ? ($('body').removeClass('DarkMode'), localStorage.setItem('isDark', '0'), $('#sum-moon-icon').removeClass("fa-sun").addClass('fa-moon')) 
            : ($('body').addClass('DarkMode'), localStorage.setItem('isDark', '1'), $('#sum-moon-icon').addClass("fa-sun").removeClass('fa-moon')),
            
            setTimeout(function () {
            $('.Cuteen_DarkSky').fadeOut(1e3, function () {
                $(this).remove()
            })
            }, 2e3)
        })
    }
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
     
        <script type="text/javascript">
            // 只在桌面版网页启用特效
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/star.js"><\/script>');
            }
        </script>
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>

<!--动态标题-->
<script type="text/javascript"> var OriginTitile = document.title, st; 
    document.addEventListener("visibilitychange", function () { 
        document.hidden ? 
        (document.title = "Σ(っ °Д °;)っ鳖走啊！", clearTimeout(st)) :
        (document.title = "φ(゜▽゜*)♪爱你么么哒！", st = setTimeout(function () { 
            document.title = OriginTitile 
        }, 3e3)) 
        }) 
</script>
    