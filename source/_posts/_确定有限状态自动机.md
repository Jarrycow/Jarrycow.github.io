---
title: 确定有限状态自动机
author: Jarrycow
img: /medias/featureimages/xxx.png
cover: false
top: false
mathjax: true
categories:
  - 算法
tags:
  - 算法
keywords: 确定有限状态自动机
abbrlink: automaton
date: 2023-07-22 21:24:12
summary: 自动机是 OI、计算机科学中被广泛使用的一个数学模型，其思想在许多字符串算法中都有涉及。
---



# 嘛是自动机

自动机是一个对信号序列进行判定的数学模型。算法中所说的「自动机」一般都指「确定有限状态自动机」。

- 「信号序列」是指一连串有顺序的信号，例如字符串从前到后的每一个字符、数组从 1 到 n 的每一个数、数从高到低的每一位等。
- 「判定」是指针对某一个命题给出或真或假的回答。有时我们需要对一个信号序列进行判定。一个简单的例子就是判定一个二进制数是奇数还是偶数，较复杂的例子例如判定一个字符串是否回文，判定一个字符串是不是某个特定字符串的子序列等等。

而自动机的工作方式和流程图类似，不同的是：自动机的每一个结点都是一个判定结点；自动机的结点只是一个单纯的状态而非任务；自动机的边可以接受多种字符（不局限于 T 或 F）。

# 形式化定义

一个 **确定有限状态自动机（DFA）** 由以下五部分构成：

1. **字符集** $\sum$：该自动机只能输入这些字符。
2. **状态集合** $Q$：如果把一个 DFA 看成一张有向图，那么 DFA 中的状态就相当于图上的顶点。
3. **起始状态** $start$：$start\in Q$，一个特殊的状态。
4. **接受状态集合** $F$：$F\sub Q$![F\subseteq Q](data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)，是一组特殊的状态。
5. **转移函数** $\delta$：是一个接受两个参数返回一个值的函数，其中第一个参数和返回值都是一个状态，第二个参数是字符集中的一个字符。如果把一个 DFA 看成一张有向图，那么 DFA 中的转移函数就相当于顶点间的边，而每条边上都有一个字符。

DFA 作用就是识别字符串，一个自动机 $A$，若能识别接受字符串 $S$，则 $A(S)=True$，否则 $A(S)=False$。

当一个 DFA 读入一个字符串时，从初始状态起按照转移函数一个一个字符地转移。如果读入完一个字符串的所有字符后位于一个接受状态，那么我们称这个 DFA **接受** 这个字符串，反之我们称这个 DFA **不接受** 这个字符串。

## 算法代码

先定义状态转移图，定义每个状态

![状态转移图](https://raw.githubusercontent.com/Jarrycow/picHost/main/AI/_状态转移图.png)

定义了 8 个状态节点，5 种转换线段

```java
Map[] states = {  // 定义状态转移图，{当前状态, 下一步可能状态}
            
            //其中 开头空格 还是指向states[0]，上一位是 开头空格，下一位可以是 空格、符号、数字、前面没有数的小数点
            new HashMap<>() {{ put(' ', 0); put('s', 1); put('d', 2); put('.', 4); }}, //0：规定0是初值，字符串表示数值，有4种起始状态，开头空格、符号、数字、前面没有数的小数点
            new HashMap<>() {{ put('d', 2); put('.', 4); }},  //1：上一位是符号，符号位后面可以是 数字、前面没有数的小数点
            new HashMap<>() {{ put('d', 2); put('.', 3); put('e', 5); put(' ', 8); }},   //2：上一位是数字，数字的下一位可以是 数字、前面有数的小数点、e、结尾空格
            new HashMap<>() {{ put('d', 3); put('e', 5); put(' ', 8); }},  //3：上一位是前面有数的小数点，下一位可以是 数字、e（8.e2 = 8e2，和2的情况一样）、结尾空格
            new HashMap<>() {{ put('d', 3); }},  //4：上一位是前面没有数的小数点，下一位只能是 数字（符号肯定不行，e得前面有数才行）    
            new HashMap<>() {{ put('s', 6); put('d', 7); }},  //5：上一位是e，下一位可以是 符号、数字
            new HashMap<>() {{ put('d', 7); }},  //6：：上一位是e后面的符号，下一位只能是 数字
            new HashMap<>() {{ put('d', 7); put(' ', 8); }},  //7：上一位是e后面的数字，下一位可以是 数字、结尾空格
            new HashMap<>() {{ put(' ', 8); }}  //8：上一位是结尾空格，下一位只能是 结尾空格
        };
        int p = 0;  // 定义开始状态
        char t;
        for(char c : s.toCharArray()) {  //遍历字符串，每个字符匹配对应属性并用t标记，非法字符标记？
            if(c >= '0' && c <= '9') t = 'd';
            else if(c == '+' || c == '-') t = 's';
            else if(c == 'e' || c == 'E') t = 'e';
            else if(c == '.' || c == ' ') t = c;
            else t = '?';
            
            if(!states[p].containsKey(t)) return false;  //当前字符标记和任何一种当前规定格式都不匹配，直接返回false
            p = (int)states[p].get(t);  //更新当前字符的规定格式，进入下一个规定的Map数组
        }

        //2（正、负整数）、3（正、负小数）、7（科学计数法）、8（前三种形式的结尾加上空格）
        //只有这四种才是正确的结尾
        return p == 2 || p == 3 || p == 7 || p == 8;
```





# 参考文献

[OI-Wiki：自动机](https://oi-wiki.org/string/automaton/)

[面试题20. 表示数值的字符串（有限状态自动机，清晰图解）](https://leetcode.cn/problems/biao-shi-shu-zhi-de-zi-fu-chuan-lcof/solutions/278913/mian-shi-ti-20-biao-shi-shu-zhi-de-zi-fu-chuan-y-2/)
